/*! express_router_lecture_gamma 2015-08-05 */
function shuffle(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}function appendTeamSizeButtons(){for(var a=minTeamSize;maxTeamSize+1>a;a++){var b=$("#buttonContainer");b.append("<button class='team-size-button'>"+a+"</button>");var c=b.children().last();c.data("teamsize",a)}$("#buttonContainer").append("<button id='randomizeTeam'>Randomize!</button>")}function appendTeamContainer(a){$("#teamContainer").append("<div id='team"+a+"' class='team-container'>Team "+(a+1)+"</div>")}function assignPeopleToTeam(a){for(var b=0,c=0;c<a.length;c++)writeTeamToDOM(a[c],b,c),b++,b>=selectedTeamSize&&(b=0)}function writeTeamToDOM(a,b,c){$("#team"+b).append("<p>"+a+"</p>"),$("#team"+b).children().last().hide().delay(500*c).slideDown(200)}var teamArray=[],minTeamSize=2,maxTeamSize=11,dataFlag=!1,selectedTeamSize=0;$(document).ready(function(){$.ajax({url:"/data",success:function(a){teamArray=a.people,dataFlag=!0}}),appendTeamSizeButtons(),$("#buttonContainer").on("click",".team-size-button",function(){selectedTeamSize=$(this).data("teamsize")}),$("#buttonContainer").on("click","#randomizeTeam",function(){if(0!=selectedTeamSize&&dataFlag){teamArray=shuffle(teamArray);for(var a=0;selectedTeamSize>a;a++)appendTeamContainer(a);assignPeopleToTeam(teamArray)}else alert("You need to select a team size!")})});